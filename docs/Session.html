<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Session</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Session</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Session<span class="signature">()</span><span class="type-signature"></span></h2>
        
            <div class="class-description"><p>Session class acts as an interface between the Haxroomie clients and the
headless browser. Session allows clients to subscribe to the different
<a href="module-haxroomie.messageTypes.html">messages</a> (events) that get sent by Haxroomie, 
<a href="https://github.com/haxball/haxball-issues/wiki/Headless-Host#roomconfigobject">haxball roomObject</a>
and 
<a href="https://github.com/saviola777/haxball-headless-manager">haxball headless manager (HHM)</a>. 
It also has methods to send requests to the
roomObject and HHM.</p>
<p><strong>Request/create new sessions with the
<a href="module-haxroomie.Haxroomie.html#getSession">Haxroomie#getSession</a>
method.
The constructor is not ment to be called directly!</strong></p>
<p>After getting hold of the Session object clients can listen to the events
when they have used the <a href="Session.html#subscribe">subscribe method</a> to 
register a handler function for them. </p>
<p>See <a href="module-haxroomie.html#~Message">Message</a> for definition
of the message format and 
<a href="module-haxroomie.messageTypes.html">message types</a> for 
the types of messages that Haxroomie sends.</p>
<p>Session follows the mediator design pattern loosely.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="Session"><span class="type-signature"></span>new Session<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Constructs a new Session object.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line33">line 33</a>
    </li></ul></dd>
    

    

    

    
</dl>





<h5>Fires:</h5>
<ul>
    <li>Session#event:client_connected</li>

    <li>Session#event:client_disconnected</li>
</ul>














    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="broadcast"><span class="type-signature"></span>broadcast<span class="signature">(message)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sends a message to all subscribers.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">module:message~Message</span>


            
            </td>

            

            

            <td class="description last"><p>message to the subscribers</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line189">line 189</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="callRoom"><span class="type-signature">(async) </span>callRoom<span class="signature">(fn)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Calls a function of the haxball roomObject in the browsers context.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fn</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>name of the haxball roomObject function</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>...args</code></td>
            

            <td class="type">
            
                
<span class="param-type">any</span>


            
            </td>

            

            

            <td class="description last"><p>arguments for the function</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line251">line 251</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="closeRoom"><span class="type-signature">(async) </span>closeRoom<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Closes the headless haxball room in this sessions browser tab.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line239">line 239</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="disablePlugin"><span class="type-signature">(async) </span>disablePlugin<span class="signature">(name)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>
    

    



<div class="description">
    <p>Disables a HHM plugin with the given id. If the name is an Array then
it disables all the plugins in the given order.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>name or array of names of the plugin(s)</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line311">line 311</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li>was the plugin disabled or not?</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;boolean></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="enablePlugin"><span class="type-signature">(async) </span>enablePlugin<span class="signature">(name)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>
    

    



<div class="description">
    <p>Enables a HHM plugin with the given id.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>name of the plugin</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line298">line 298</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li>was the plugin enabled or not?</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;boolean></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getDependentPlugins"><span class="type-signature">(async) </span>getDependentPlugins<span class="signature">(name)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;<a href="global.html#PluginData">PluginData</a>>>}</span></h4>
    

    



<div class="description">
    <p>Gets a list of plugins that depend on the given plugin.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>name of the plugin</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line323">line 323</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li>array of plugins</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;<a href="global.html#PluginData">PluginData</a>>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getPlugin"><span class="type-signature">(async) </span>getPlugin<span class="signature">(name)</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="global.html#PluginData">PluginData</a>>|null}</span></h4>
    

    



<div class="description">
    <p>Returns PluginData of the given plugin id.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>name of the plugin</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line286">line 286</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li>data of the plugin or null if
 plugin was not found</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="global.html#PluginData">PluginData</a>></span>
|

<span class="param-type">null</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getPlugins"><span class="type-signature">(async) </span>getPlugins<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;<a href="global.html#PluginData">PluginData</a>>>}</span></h4>
    

    



<div class="description">
    <p>Returns a list of PluginData objects.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line273">line 273</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li>array of plugins</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;<a href="global.html#PluginData">PluginData</a>>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="openRoom"><span class="type-signature">(async) </span>openRoom<span class="signature">(config)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    <p>Opens a headless haxball room in this sessions browser tab.</p>
<p>The config object can contain any properties you want to use in your
own HHM config file given in config.hhmConfigFile. The config object is
usable globally from within the HHM config as the <strong>haxroomie</strong> object.</p>
<p>The parameters that are used by the default HHM config are listed here
as optional parameters (except <code>hhmConfigFile</code> and <code>pluginFiles</code> that
are used anyways)</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>config object that gets injected to HHM config
   as <strong>haxroomie</strong></p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>token</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>token to start the room with from 
   https://<a href="http://www.haxball.com/headlesstoken">www.haxball.com/headlesstoken</a></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>roomName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>room name</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>playerName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>host player name</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>maxPlayers</code></td>
            

            <td class="type">
            
                
<span class="param-type">int</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>max players</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>public</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>should the room be public</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>adminPassword</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>admin role password in room</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>hhmConfigFile</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Configuration for the haxball 
   headless manager (HHM). Object must contain name and content properties
   where name is the file/config name and content has the file contents.
   Both properties shold be strings.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>pluginFiles</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;object></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Optional HHM plugins to load when 
   starting the room. Objects must contain name and content properties where
   name is the file/plugin name and content has the file contents. Both
   properties shold be strings.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line230">line 230</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li>config object with a roomLink property</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="send"><span class="type-signature"></span>send<span class="signature">(id, message)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sends a message to the subscriber with given id.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">number</span>
|

<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>the id of subscriber that will receive
   the message</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">module:message~Message</span>


            
            </td>

            

            

            <td class="description last"><p>message to the receiver</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line172">line 172</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="subscribe"><span class="type-signature"></span>subscribe<span class="signature">(id, handler)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Subscribes to the events send by this session.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">number</span>
|

<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>identifier of the subscriber</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>handler</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>function that handles the incoming messages</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line109">line 109</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="unsubscribe"><span class="type-signature"></span>unsubscribe<span class="signature">(id)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Unsubscribes the subscriber with given id from this session.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">number</span>
|

<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>identifier of the subscriber</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line132">line 132</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="validateMessage"><span class="type-signature"></span>validateMessage<span class="signature">(message)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Validates the give object to be valid Message object.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">module:message~Message</span>


            
            </td>

            

            

            <td class="description last"><p>Message object to be validated</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_session_Session.js.html">src/session/Session.js</a>, <a href="src_session_Session.js.html#line149">line 149</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-haxroomie.html">haxroomie</a></li></ul><h3>Classes</h3><ul><li><a href="module-haxroomie.Haxroomie.html">Haxroomie</a></li><li><a href="Session.html">Session</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-haxroomie.messageTypes.html">messageTypes</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Mar 01 2019 09:45:58 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>